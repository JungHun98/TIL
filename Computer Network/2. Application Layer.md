# 1. Principles of network applications

## Creating a network app
- end system에서 동작해야함
- 네트워크를 통해서 통신해야함
- 하지만 네트워크 밑단까지 구현할 필요가 없다.
  - API, 인프라를 가져와 사용하면 된다.

## Application architectures
- cilent - server model
  - server (response)
    - 항상 실행중인 host
    - permanent(public) IP 주소를 가져야한다. 
  - client (request)
    - sever와 통신한다. x
    - IP 주소가 public하지 않아도 된다.
    - client끼리는 직접적으로 통신하지 않는다.

## Processes communicating
- process: 하나의 호스트 내에서 실행중인 프로그램
  - 동일한 호스트 내에서 두 개의 프로세스가 통신한다면 IPC(OS개념)
  - 다른 호스트에서 실행중인 프로세스들의 통신이 네트워크 영역
  - Client process: 통신을 요청하는 프로세스
  - Server process: 연결을 기다리는 프로세스

## Sockets
- 프로세스간 send/receive 메시지를 주고 받을 수 있는 창구 역할
- 소켓은 문(door)와 비슷한 개념이다.

## Addressing processes
- 메시지를 보내기위해 프로세스는 식별자를 가져야한다.
- host 장치는 유일한 32bit IP address를 갖는다.
- host의 IP주소만으로 데이터를 전달해야 할 프로세스를 식별할 수 없다.
  - 따라서 식별자에는 **IP Address**와 **Port number**가 포함되어 있어야한다.
  - ex) HTTP server: 80, mail server: 25
  - HTTP 메시지 전송
    - IP address: 128.119.245.12
    - port number: 80

## transport 서비스에서 app이 필요한 것은?
1. data intergrity(데이터 무결성): 데이터는 변하면 안된다.
  - 몇몇 앱에서 100% 신뢰성있는 데이터 전송이 요구된다.
  - 다른 앱(audio ...)은 loss를 어느정도 허용한다.

2. timing
  - 몇몇 앱은 효율을 위해 낮은 delay가 요구된다.

3. throughput(단위시간당 데이터 처리량)
  - 몇몇 앱은 효율을 위해 최소 throughput을 요구된다.
  - 다른 앱은 

4. 보안

|application|data loss|throughput|time sensitive|
|-----|-----|-----|-----|
|파일 전송|no loss|유연함|X|
|이메일|no loss|유연함|X|
|웹 문서|no loss|유연함|X|
|문자 메시지|no loss|유연함|X|
|실시간 오디오/비디오|loss 허용|정해져 있음|O 100's msec|
|저장된 오디오/비디오|loss 허용|정해져 있음||
|게임|loss 허용|조금 상승|몇 초|

## Internet transport protocols services
|TCP|UDP|
|-------------|-------------|
|신뢰성있는 전송|신뢰성 없는 전송|
|흐름 제어|X|
|혼잡 제어|X|
|연결 지향 프로토콜|X|

- TCP에서 제공하는 서비스를 사용하지 않는 UDP는 왜 사용할까?
  - UDP는 다른 동작없이 데이터만을 전송한다.
  - 비디오/오디오를 전송할 때 UDP를 사용함

|application|protocol|underlying transfort protocol|
|-----|-----|-----|
|e-mail|SMTP|TCP|
|Web|HTTP|TCP|
|file transfer|FTP|TCP|
|streaming multimedia|HTTP|TCP or UDP|

# 2. electrinic mail
- 세 가지 컴포넌트로 이루어진다
  - user agents 
  - mail servers
  - simple mail transfer protocol: SMTP

## User Agent
  - 메일 메시지를 작성, 편집, 읽는 역할을 한다.
  - ex) Outlook, Web browser ... 

## mail servers
  - mailbox를 포함
  - 메일을 보내기 위해 message queue사용
  - SMTP protocol은 mail server끼리 동작함
  
## SMTP
  - TCP를 사용함(신뢰성 있는 전송을 위해), 25번 port사용

## 메일을 보내는 단계
  1. send user 가 mail 전송
  2. send user agent는 user의 mail server로 메일 전송(message queue에 저장됨)
  3. SMTP를 사용하는 client가 rev user의 mail server와 TCP로 연결 
  4. SMTP client는 send user의 message를 TCP로 전송
  5. rev user의 mail server는 user의 mailbox에 받은 message를 저장
  6. rev user는 자신의 user agent를 이용해 메일을 확인

- Sample SMTP interaction
  - email client 없이 메일보내는 법
  - `telnet servername 25`: 25 port(SMTP port)로 mail server에 접속
  - `HELO myname`: 메일 서버에 자신의 주소(IP, email ...) 입력
  - `MAIL FROM: <email@something.com>`: 전송하는 사람의 이메일 
  - `RCPT TO: <email@something.com>`: 받는 사람의 이메일
  - `DATA`: 메일의 내용 입력, `.`을 입력하면 내용 입력 종료
  - `QUIT`: 메일 서버 연결 해제

## Mail access protocols
- SMTP: receiver's server에 전송/저장하는 프로토콜
- mail accsess protocol: server로부터 메일을 읽어올 때 사용하는 프로토콜
  - POP, IMAP, HTTP  
